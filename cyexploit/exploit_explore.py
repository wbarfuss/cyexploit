import numpy as np
from .exploit_core import ExploitCore


class ExploitExplore(ExploitCore):

    def __str__(self):
        return "Instance of the Exploit Model (Explore) of size %i" % self.N

    # TODO: docs
    @staticmethod
    def SmallTestCase(N, p=0.35, tau=1, phi=0.5):

        adjaceny_matrix = np.random.rand(N, N)
        adjaceny_matrix = (adjaceny_matrix + adjaceny_matrix.T) / 2.
        adjaceny_matrix = 1*(adjaceny_matrix < p)
        adjaceny_matrix = adjaceny_matrix - \
            np.diag(adjaceny_matrix.diagonal())
        return ExploitCore(adjaceny_matrix, np.random.randint(2, size=N),
                           stocks=np.ones(N),
                           max_stocks=np.ones(N),
                           growth_rates=np.ones(N),
                           rationalities=np.ones(N),
                           rewiring_prob=phi, update_timescale=tau)
